<!DOCTYPE html>

<html lang="en" data-theme="dark">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>main.cr</title>
    <!-- Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chivo+Mono:ital,wght@0,100..900;1,100..900&family=Chivo:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">    
    <!-- Pico CSS -->
    <link rel="stylesheet" href="https://unpkg.com/@picocss/pico@latest/css/pico.min.css" />
    <link rel="stylesheet" href="https://unpkg.com/@picocss/pico@latest/css/pico.colors.min.css" />
    <!-- Highlight.js -->
    <link id="hljscss" rel="stylesheet"
        href="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/styles/night-owl.min.css" />
    <script src="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/highlight.min.js"></script>
    <script src="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/languages/crystal.min.js"></script>    <!-- Custom style-->
    
<style>
html * {
    font-family: Chivo, sans-serif;
    font-variant-ligatures: none;
    font-weight: 300;
    overflow: visible !important;
}

code,
code>* {
    font-family: 'Chivo Mono', monospace !important;
    padding-top: 0 !important;
}

div.doc>pre>code {
    background-color: var(--pico-color-slate-800);
    border: solid 1 var(--pico-color-slate-700)
}

.background {
    background: linear-gradient(to right, var(--pico-color-slate-900) 50%, #011627 50%);
    height: 100vh;
    width: 100vw;
    position: fixed;
    z-index: -1;
    margin: 0;
    top: 0px;
    left: 0px;
    display: block;
}
@media screen and (max-width: 768px) {
    div.background {
        display: none;
    }
}

span.anchor {
    position: relative;
}

a.anchor {
    position: absolute;
    text-decoration: none;
    left: -1.2em;
    opacity: 0;
    -webkit-transition: opacity 0.2s linear;
    
}

div.doc:hover .anchor {
    opacity: 1;
}

</style>

</head>

<body>
    <main class="container">
        
<div id="background" class="background">
</div>

<div id="section-1" class="grid">
    <div class="doc" id="section-1">
        <span class="anchor">
            <a href="#section-1" class="anchor">↦</a>
        </span>
        <h1>main.cr</h1>
<p>This is the entrypoint to use Crycco as a command line tool.
As you can see by the dependencies, we are using <code>docopt</code> to
parse the command line arguments.</p>
<p>It parses the arguments based on the actual help message. For
more information you can visit <a href="https://docopt.org/">docopt.org</a>.</p>

    </div>
    <div class="code">
        
<pre class="code"><code class="crystal">require &quot;docopt&quot;
require &quot;./crycco&quot;

</code></pre>
      
    </div>
</div>

<div id="section-2" class="grid">
    <div class="doc" id="section-2">
        <span class="anchor">
            <a href="#section-2" class="anchor">↦</a>
        </span>
        <p>Crycco is not a very complicated tool, really, so the options are
few and simple.</p>

    </div>
    <div class="code">
        
<pre class="code"><code class="crystal">HELP = &lt;&lt;-HELP
Crycco, a Crystal version of docco/pycco/etc.

Usage:
    crycco FILE... [-L &lt;file&gt;][-l &lt;name&gt;][-o &lt;path&gt;][-c &lt;file&gt;]
                     [-t &lt;file&gt;] [--doc|--code]
    crycco -v
    cryco --help

Options:
  -v, --version           output the version number
  -l, --languages &lt;file&gt;  use a custom languages.yml file
  -o, --output &lt;path&gt;     output to a given folder [default: docs/]
  -t, --template &lt;name&gt;   template for doc layout [default: sidebyside]
  --code                  output source code instead of HTML [default: false]
  -h, --help              this help message

Crycco comes with two templates for HTML documents which you can
use in the -t option when generating docs:

sidebyside (default)
  Shows the docs and code in two columns, matching docs to the code
  they are about.
basic
  Single columns, docs then code, then docs then code.

If you use the --code option, the output will be machine-readable
source code instead of HTML.

HELP

options = Docopt.docopt(HELP, ARGV)

</code></pre>
      
    </div>
</div>

<div id="section-3" class="grid">
    <div class="doc" id="section-3">
        <span class="anchor">
            <a href="#section-3" class="anchor">↦</a>
        </span>
        <p>Handle version manually</p>

    </div>
    <div class="code">
        
<pre class="code"><code class="crystal">if options[&quot;--version&quot;]
  puts &quot;Crycco #{Crycco::VERSION}&quot;
  exit 0
end

</code></pre>
      
    </div>
</div>

<div id="section-4" class="grid">
    <div class="doc" id="section-4">
        <span class="anchor">
            <a href="#section-4" class="anchor">↦</a>
        </span>
        <p>First we initialize the languages list from the given file or
whatever is the default.</p>

    </div>
    <div class="code">
        
<pre class="code"><code class="crystal">Crycco.load_languages(options[&quot;--languages&quot;].try &amp;.as(String))

</code></pre>
      
    </div>
</div>

<div id="section-5" class="grid">
    <div class="doc" id="section-5">
        <span class="anchor">
            <a href="#section-5" class="anchor">↦</a>
        </span>
        <p>And here, we call <code>Crycco.process</code> with the options we got, casted to
the types it expects. If there is an error, we can just crash with
an exception and a backtrace. The interesting code is in <a href="./crycco.cr.html#section-2">crycco.cr</a>.</p>

    </div>
    <div class="code">
        
<pre class="code"><code class="crystal">Crycco.process(
  sources: options[&quot;FILE&quot;].as(Array(String)),
  out_dir: options[&quot;--output&quot;].as(String),
  template: options[&quot;--template&quot;].as(String),
  as_source: options[&quot;--code&quot;] != &quot;false&quot;,
)

</code></pre>
      
    </div>
</div>


    </main>
    <footer style="text-align: center;" class="pico-background-purple-800">
    » Generated by <a href="https://crycco.ralsina.me">Crycco</a> »	Layout 
sidebyside
 » Powered by <a href="https://picocss.com">PicoCSS</a> and <a href="https://www.omnibus-type.com/">Chivo Font Family</a> 
    </footer>
    <script>
        hljs.highlightAll();
    </script>
</body>

</html>