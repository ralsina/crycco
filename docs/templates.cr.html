<!DOCTYPE html>

<html lang="en" data-theme="dark">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>templates.cr</title>
    <!-- Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chivo+Mono:ital,wght@0,100..900;1,100..900&family=Chivo:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">    
    <!-- Pico CSS -->
    <link rel="stylesheet" href="https://unpkg.com/@picocss/pico@latest/css/pico.min.css" />
    <link rel="stylesheet" href="https://unpkg.com/@picocss/pico@latest/css/pico.colors.min.css" />
    <!-- Highlight.js -->
    <link id="hljscss" rel="stylesheet"
        href="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/styles/night-owl.min.css" />
    <script src="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/highlight.min.js"></script>
    <!-- Custom style-->
    
<style>
html * {
    font-family: Chivo, sans-serif;
    font-variant-ligatures: none;
    font-weight: 300;
    overflow: visible !important;
}

code,
code>* {
    font-family: 'Chivo Mono', monospace !important;
    padding-top: 0 !important;
}

div.doc>pre>code {
    background-color: var(--pico-color-slate-800);
    border: solid 1 var(--pico-color-slate-700)
}

.background {
    background: linear-gradient(to right, var(--pico-color-slate-900) 50%, #011627 50%);
    height: 100vh;
    width: 100vw;
    position: fixed;
    z-index: -1;
    margin: 0;
    top: 0px;
    left: 0px;
    display: block;
}
@media screen and (max-width: 768px) {
    div.background {
        display: none;
    }
}

span.anchor {
    position: relative;
}

a.anchor {
    position: absolute;
    text-decoration: none;
    left: -1.2em;
    opacity: 0;
    -webkit-transition: opacity 0.2s linear;
    
}

div.doc:hover .anchor {
    opacity: 1;
}

</style>

</head>

<body>
    <main class="container">
        
<div id="background" class="background">
</div>

<div id="section-1" class="grid">
    <div class="doc" id="section-1">
        <span class="anchor">
            <a href="#section-1" class="anchor">↦</a>
        </span>
        <h1>templates.cr</h1>
<p>This is the code that handles loading the templates which
are used to generate the final HTML files. It uses the
<a href="https://straight-shoota.github.io/crinja/">Crinja</a>
template engine.</p>

    </div>
    <div class="code">
        
<pre class="code"><code class="crystal">require &quot;crinja&quot;
require &quot;crinja/loader/baked_file_loader&quot;

</code></pre>
      
    </div>
</div>

<div id="section-2" class="grid">
    <div class="doc" id="section-2">
        <span class="anchor">
            <a href="#section-2" class="anchor">↦</a>
        </span>
        <p>This module bakes the default templates into the binary
so we don't have to carry them around</p>

    </div>
    <div class="code">
        
<pre class="code"><code class="crystal">module MyBakedTemplateFileSystem
  BakedFileSystem.load(&quot;../templates&quot;, __DIR__)
end

</code></pre>
      
    </div>
</div>

<div id="section-3" class="grid">
    <div class="doc" id="section-3">
        <span class="anchor">
            <a href="#section-3" class="anchor">↦</a>
        </span>
        <p>The Templates module is a singleton that provides access
to the templates. The loader will look for templates in
several places:</p>
<ul>
<li>The <code>templates/</code> directory</li>
<li>The current directory</li>
<li>The templates shipped in the binary itself</li>
</ul>
<p>It will also try to load it with and without adding the <code>.j2</code>
extension.</p>
<p>You can see the provided templates in
<a href="https://github.com/ralsina/crycco/tree/main/templates">Github</a>
and adapt them to your needs: make a copy and pass it in the
<code>-t</code> option to Crycco.</p>

    </div>
    <div class="code">
        
<pre class="code"><code class="crystal">module Templates
  extend self
  Env = Crinja.new

  Env.loader = Crinja::Loader::ChoiceLoader.new([
    Crinja::Loader::FileSystemLoader.new([&quot;templates/&quot;, &quot;.&quot;]),
    Crinja::Loader::BakedFileLoader.new(MyBakedTemplateFileSystem),
  ])

  def get(name : String) : Crinja::Template
    Env.get_template(name)
  rescue ex : Crinja::TemplateNotFoundError
    Env.get_template(name + &quot;.j2&quot;)
  end
end

</code></pre>
      
    </div>
</div>


    </main>
    <footer style="text-align: center;" class="pico-background-purple-800">
    » Generated by <a href="https://crycco.ralsina.me">Crycco</a> »	Layout 
sidebyside
 » Powered by <a href="https://picocss.com">PicoCSS</a> and <a href="https://www.omnibus-type.com/">Chivo Font Family</a> 
    </footer>
    <script>
        hljs.highlightAll();
    </script>
</body>

</html>